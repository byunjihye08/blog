{"componentChunkName":"component---src-templates-post-template-jsx","path":"/etc/css-rendering-3/","result":{"data":{"site":{"siteMetadata":{"title":"변지혜 블로그","subtitle":"행동하는 개발자","copyright":"© All rights reserved.","author":{"name":"변지혜","twitter":"#"},"disqusShortname":"regyu","url":"https://wisdom08.netlify.com/"}},"markdownRemark":{"id":"e21f865e-6197-5517-8a37-ce254dcd9491","html":"<h2>CSSOM &#x26; VENDOR PREFIX</h2>\n<blockquote>\n<p>CSS 객체모델 &#x26; 브라우저 접두어   </p>\n</blockquote>\n<p><a href=\"https://www.youtube.com/channel/UCKXBpFPbho1tp-Ntlfc25kA\">코드스피츠</a>\n채널에서 보고 정리한 글입니다.</p>\n<hr>\n<h2>Css object model</h2>\n<ul>\n<li>Html의 텍스트를 메모리상의 구조로 만드는것은 Css object model 이다.</li>\n<li>Html 의 태크는 일종의 컨터이너 역할이다.</li>\n<li>\n<p>Style태그의 실체는 Sheet 속성에 있는 cssStyleSheet 객체이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n  &lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot; /&gt;\n    &lt;title&gt;Title&lt;/title&gt;\n  &lt;/head&gt;\n\n  &lt;style id=&quot;s&quot;&gt;\n    .test {\n      background: #ff0;\n    }\n  &lt;/style&gt;\n\n  &lt;body&gt;\n    &lt;script&gt;\n      const el = document.querySelector(&#39;#s&#39;);\n\t\t\tconst sheet = el.sheet;\n\t\t\tconst rules = sheet.cssRules;\n\t\t\tconst rule = rules[0];\n\t\t\tconsole.log(rule.selectorText);\n\t\t\tconsole.log(rule.style.background);\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</code></pre></div>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/34796064751f2d9068c68110ef0b2c91/194a3/Untitled-8b2002a4-2cb6-43c6-9390-12a1eea209d6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 886px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 70.8803611738149%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAADTElEQVQ4y22Qi08TVhSH+YeWLJbMx7BFHotQpi5bJ1CWAFM3E0SgIKNO0EUx3dgrcxq3JcwMjeBgDGpfVKoUC6WtrVCKAq60gA6lUh7FllK/3Yomju0mX+4vJyffPfekXHIscfjyDFXXnlDV/pSKtjnBY6o6FqjuWqXWgOA5tUZe5k0YN6gxJGjqXyPlM22YN+q7yfpBz67vDKR/c530pk5xd7O72cW71wLktkySI8jdRM6r+uUJMi5NU9gWI+WLm1Bi+pYjpmwOWxSU31ZwyLCPg/p9HNDm8YlBzrFhBXVj+1H7/kudL5+G+3upsDVQ0pEg5WQvfKQ/zUXDNtqNWfxuzuRKl4yWTilXdbtoM2Sgc+aiFXTac/hzaIOuF3cu3XY5re4sym2fU9wuhA1mOGD9ilumbbjOpWL9UcLwr29xr2UrAxckDF2UYD8v4VFHGglLBtGedCJGGSt6GcsGGTGdjAlrGmW2ExvCkzfEly0aHP1vM2XIxH1dxoho8mgzcXVl4DVk4+6W4tXtYNIsZfKGjKeubJaH3yF8N5uIM4fR29J/C4t7NXgdO0Xjfpx9xYw7S3H0yLljycPbn8uw7VPx4Bn6zWpBHdP3ThOd/5pY+ALxQAU+63YhrH9NaGnCY5OQCHyP1+dlbtYD8x+TeKRkfWYvrFwhecKhCaanPAT9I8zPTfKcBOuzP+Hrk1A20PC68Es8AzuI3y9mIaBi0V/OaqCQyJTAv0dM8zOxZw9ZW50gtvqA9aifuMjxtb9JPDwvhKmbhRo8gztZ873HsxkF0cAHQpjPalBJNLiH+WAzT+ZjLC9HmHscIhRaJLywSGgJ1mZ/Y8z6PxO6hTA2pmBlpohIcrpggaCIFX8e8aUOfmm+SnWNijONjTSePYtKVUlzS4dYTSvevi1ihy+Fp4Sw9KaG0cE08L0vdlYgdplPIpikkPW/5BD5A3W1mvTtqRQXfEipsgDp1i3UHz8FC62M33qTI2LCkqTweA8ozRp0dhlumxyHQ45z6BV5OO27cbqK8I7VCmq4O1KFZ6SSUZFHRM09VITRJuWQ9QTKNiE8N7jOQe0DVL13ONrjEbg3IWomJ+XGAcGgyPYXJHOydtTkorLXTZl+HLUpzj8y2D6vVtvClQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Untitled 8b2002a4 2cb6 43c6 9390 12a1eea209d6\"\n        title=\"\"\n        src=\"/static/34796064751f2d9068c68110ef0b2c91/194a3/Untitled-8b2002a4-2cb6-43c6-9390-12a1eea209d6.png\"\n        srcset=\"/static/34796064751f2d9068c68110ef0b2c91/0783d/Untitled-8b2002a4-2cb6-43c6-9390-12a1eea209d6.png 240w,\n/static/34796064751f2d9068c68110ef0b2c91/782f4/Untitled-8b2002a4-2cb6-43c6-9390-12a1eea209d6.png 480w,\n/static/34796064751f2d9068c68110ef0b2c91/194a3/Untitled-8b2002a4-2cb6-43c6-9390-12a1eea209d6.png 886w\"\n        sizes=\"(max-width: 886px) 100vw, 886px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n</li>\n</ul>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/CSSRule\">CSSRule</a></p>\n<table>\n<thead>\n<tr>\n<th><strong>Type</strong></th>\n<th><strong>Value</strong></th>\n<th><strong>Rule-specific interface</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>CSSRule.STYLE_RULE</strong></td>\n<td>1</td>\n<td>CSSStyleRule</td>\n</tr>\n<tr>\n<td><strong>CSSRule.IMPORT_RULE</strong></td>\n<td>3</td>\n<td>CSSImportRule</td>\n</tr>\n<tr>\n<td><strong>CSSRule.MEDIA_RULE</strong></td>\n<td>4</td>\n<td>CSSMediaRule</td>\n</tr>\n<tr>\n<td><strong>CSSRule.FONT<em>FACE</em>RULE</strong></td>\n<td>5</td>\n<td>CSSFontFaceRule</td>\n</tr>\n<tr>\n<td><strong>CSSRule.PAGE_RULE</strong></td>\n<td>6</td>\n<td>CSSPageRule</td>\n</tr>\n<tr>\n<td><strong>CSSRule.KEYFRAMES_RULE</strong></td>\n<td>7</td>\n<td>CSSKeyframesRule</td>\n</tr>\n<tr>\n<td><strong>…</strong></td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h2>Insert Rule</h2>\n<ul>\n<li>동적으로 css 추가 rules에 추가 하는것이 아니라 sheet에 의뢰를 해야된다.(sheet에 추가해달라고 해야한다.)</li>\n<li>style rule은 뒷순서로 적혀있는 것이 우선이 된다.</li>\n<li>\n<p>styleSheet를 건들이면 inlineTag를 건드리는것보다 훨씬좋다. (일괄 적용이 가능, inlineStyle을 건들이는 것이 아니라 css를 건들이는 것은성능상의 저하가 거의 없다.  돔을 건들이지 않는다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n  &lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot; /&gt;\n    &lt;title&gt;Title&lt;/title&gt;\n  &lt;/head&gt;\n\n  &lt;style id=&quot;s&quot;&gt;\n    .test {\n      background: #ff0;\n    }\n  &lt;/style&gt;\n\n  &lt;body&gt;\n    &lt;div class=&quot;red red1&quot;&gt;red&lt;/div&gt;\n    &lt;div class=&quot;blue blue1&quot;&gt;blue&lt;/div&gt;\n    &lt;div class=&quot;red&quot;&gt;red&lt;/div&gt;\n    &lt;div class=&quot;blue&quot;&gt;blue&lt;/div&gt;\n    &lt;div class=&quot;red&quot;&gt;red&lt;/div&gt;\n    &lt;div class=&quot;blue&quot;&gt;blue&lt;/div&gt;\n    &lt;div class=&quot;red&quot;&gt;red&lt;/div&gt;\n    &lt;div class=&quot;blue&quot;&gt;blue&lt;/div&gt;\n    &lt;script&gt;\n      const el = document.querySelector(&#39;#s&#39;);\n      const sheet = el.sheet;\n      const rules = sheet.cssRules;\n      const rule = rules[0];\n\n      document.querySelector(&#39;.red1&#39;).onclick = _ =&gt; {\n        sheet.insertRule(&#39;.red{background:red}&#39;, rules.length);\n        sheet.insertRule(&#39;.blue{background:blue}&#39;, rules.length);\n      };\n\n      document.querySelector(&#39;.blue1&#39;).onclick = _ =&gt; {\n        sheet.deleteRule(rules.length - 1);\n      };\n\n      console.log(\n        Array.from(rules)\n          .map(v =&gt; v.cssText)\n          .join(&#39;\\n&#39;)\n      );\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html</code></pre></div>\n<video controls autoplay loop>\n  <source src=\"/19cb74c856a1198b541ea221d45d7308/insertRule.mov\" type=\"video/mp4\">\n    Your browser does not support the video tag.\n</video>\n</li>\n</ul>\n<h2>Compatibility Library 만들기</h2>\n<ul>\n<li>\n<p>Vendor Prefix</p>\n<ul>\n<li>Runtime Fetch (<strong>실행 중에 확인해야 한다</strong>.)</li>\n</ul>\n</li>\n<li>\n<p>Unsupported Property</p>\n<ul>\n<li>graceful fail (우아하게 처리)</li>\n</ul>\n</li>\n<li>\n<p>Hierarchy Optimize</p>\n<ul>\n<li>Sheet.disabled=true;</li>\n</ul>\n</li>\n</ul>\n<h2>Classes</h2>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f15098417e1d935289865379133876e8/355b0/Untitled-defacaa0-be84-4651-93d9-bfe4997f6e82.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 960px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 50.2177068214804%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABrUlEQVQoz42S30tUQRTH798UWUTgq+RTIj1ZEgX5X4gEIYEUvaSFVi7lz1VRDATJVVnroU1zax8UFRLFMlndXXdn7syd+Tj3brIqu+HAd84MHM73e77neJ+3Ax4nFM+WyuhKKp7MK6bXAsJjrY1w2eO9+aa58lJw+4OkbVLSNCC58UrQMaeiBBVYtDmPU4JqRF5sRdMYkzya9GmbUjyc8GkelHQuqP8qqaXa2z4yfNoMSP6yTKcPmd/SLLp3Zt8yngnocx28Xdb0pjTvXAw72suXi5lqCv/xRbfIH6BLOZdZIlco0jwguNYjuDMkuTsqqe8VXHd2pHZNlO87OwJTQUjghVf54xKUplAsIYTgb05EBW++FrTEfR5MKBr6BXU9JTJ/TO2h1PLEkZPYCvi4bhhPFxlZzjOzAbMblrlNiP/UEUZ+aMYymmEXv++ZcsGzU6usyRkCK9HFbOiaQ56nySx13T63YoJ7cemi5Gq34MUXVVF4Uam1p96AdnJzhWOyR8cIuU974rdbLUXrmOS+Q4vzN/T6+VKVgpdZj9QObvKKwbTm/aqOYrgBX3cMJ2GM3kToy9D5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Untitled defacaa0 be84 4651 93d9 bfe4997f6e82\"\n        title=\"\"\n        src=\"/static/f15098417e1d935289865379133876e8/f570d/Untitled-defacaa0-be84-4651-93d9-bfe4997f6e82.png\"\n        srcset=\"/static/f15098417e1d935289865379133876e8/0783d/Untitled-defacaa0-be84-4651-93d9-bfe4997f6e82.png 240w,\n/static/f15098417e1d935289865379133876e8/782f4/Untitled-defacaa0-be84-4651-93d9-bfe4997f6e82.png 480w,\n/static/f15098417e1d935289865379133876e8/f570d/Untitled-defacaa0-be84-4651-93d9-bfe4997f6e82.png 960w,\n/static/f15098417e1d935289865379133876e8/355b0/Untitled-defacaa0-be84-4651-93d9-bfe4997f6e82.png 1378w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li>\n<p>Vendor Prefix</p>\n<ul>\n<li>Runtime Fetch (<strong>실행 중에 확인해야 한다</strong>.)</li>\n<li>\n<p>document body style 에게 물어봐야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n  &lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot; /&gt;\n    &lt;title&gt;Title&lt;/title&gt;\n    &lt;style&gt;&lt;/style&gt;\n  &lt;/head&gt;\n\n  &lt;style id=&quot;s&quot;&gt;\n    .test {\n      background: #ff0;\n    }\n  &lt;/style&gt;\n\n  &lt;body&gt;\n    &lt;div class=&quot;test&quot;&gt;test&lt;/div&gt;\n\n    &lt;script&gt;\n      const Style = (_ =&gt; {\n        const prop = new Map(),\n          prefix = &#39;webkit,moz,ms,chrom,o,khtml&#39;.split(&#39;,&#39;);\n        const NONE = Symbol();\n        const BASE = document.body.style;\n        const getKey = key =&gt; {\n          if (prop.has(key)) return prop.get(key);\n          if (key in BASE) prop.set(key, key);\n          else if (\n            !prefix.some(v =&gt; {\n              //프리픽스를 붙인 속성은 존재하는가?\n              const newKey = v + key[0].toUpperCase() + key.substr(1);\n              if (newKey in BASE) {\n                prop.set(key, newKey);\n                key = newKey;\n                return true;\n              } else return false;\n            })\n          ) {\n            prop.set(key, NONE);\n            key = NONE; //프리픽스로도 안되면 없는 키!\n          }\n          return key;\n        };\n        return class {\n          constructor(style) {\n            this._style = style;\n          }\n          get(key) {\n            key = getKey(key);\n            if (key === NONE) return null;\n            return this._style[key];\n          }\n          set(key, val) {\n            key = getKey(key);\n            if (key !== NONE) this._style[key] = val;\n            return this;\n          }\n        };\n      })();\n\n      const Rule = class {\n        constructor(rule) {\n          this._rule = rule;\n          this._style = new Style(rule.style);\n        }\n        get(key) {\n          return this._style.get(key);\n        }\n        set(key, val) {\n          this._style.set(key, val);\n          return this;\n        }\n      };\n\n      const Sheet = class {\n        constructor(sheet) {\n          this._sheet = sheet;\n          this._rules = new Map(); //위의 Rule 클래스를 사용하기 위해\n        }\n        add(selector) {\n          const index = this._sheet.cssRules.length;\n          this._sheet.insertRule(`${selector}{}`, index);\n          const cssRule = this._sheet.cssRules[index];\n          const rule = new Rule(cssRule);\n          this._rules.set(selector, rule);\n          return rule;\n        }\n        remove(selector) {\n          if (!this._rules.has(selector)) return;\n          const rule = this._rules.get(selector);\n          Array.from(this._sheet.cssRules).some((cssRule, index) =&gt; {\n            if (cssRule === rule._rule) {\n              this._sheet.deleteRule(index);\n              return true;\n            }\n          });\n        }\n        get(selector) {\n          return this._rules.get(selector);\n        }\n      };\n\n      const sheet = new Sheet(document.styleSheets[1]);\n      sheet.add(&#39;body&#39;).set(&#39;background&#39;, &#39;#f00&#39;);\n      sheet\n        .add(&#39;.test&#39;)\n        .set(\n          &#39;cssText&#39;,\n          &#39;width:200px; border:1px solid #fff; color:#000; background:#fff&#39;\n        );\n      // sheet.remove(&#39;.test&#39;);\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</code></pre></div>\n</li>\n</ul>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3a06d0d4eef51a9ea033680c7c2c5787/68176/Untitled-d7753fc5-0d8e-41bf-a8f4-18e52a4f2609.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 960px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 48.23008849557522%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABJklEQVQoz+3MvUtCYRTH8WcrDSPQahPy5TZJVNoQSJINbdUqLQW94E0INUrdIim1SDCTiP6VoJf/IOi6uWReLw5BtLR8e64RIS3W3PB5fudwnnPEciTC0uICc+FZZoLBtnAoxLjPx7Ddjs1iod9q/cFmtXTUpr7eHoRbUXC6XKysrVOqXFA4LZI7O2e/VCadP2bvKM/uYa5DKldoz8w0e/OPKVuuIAqxKCfqJtdXl9Tvbqjd36IV8zyoq2jJLbSEymM8+pmJqKS2aUmVqpx/zao7MWqZBIJsGg5SvGe2eY1v8CbzZX6a1sgArdEhWspglxwYHjuiLp8n6dnroCEPNGTqY070KQXd70UPdK8pCSOgYMjim+z9HpoTLoxJ96+Jvyz9H+zwAalLv3tRypnKAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Untitled d7753fc5 0d8e 41bf a8f4 18e52a4f2609\"\n        title=\"\"\n        src=\"/static/3a06d0d4eef51a9ea033680c7c2c5787/f570d/Untitled-d7753fc5-0d8e-41bf-a8f4-18e52a4f2609.png\"\n        srcset=\"/static/3a06d0d4eef51a9ea033680c7c2c5787/0783d/Untitled-d7753fc5-0d8e-41bf-a8f4-18e52a4f2609.png 240w,\n/static/3a06d0d4eef51a9ea033680c7c2c5787/782f4/Untitled-d7753fc5-0d8e-41bf-a8f4-18e52a4f2609.png 480w,\n/static/3a06d0d4eef51a9ea033680c7c2c5787/f570d/Untitled-d7753fc5-0d8e-41bf-a8f4-18e52a4f2609.png 960w,\n/static/3a06d0d4eef51a9ea033680c7c2c5787/68176/Untitled-d7753fc5-0d8e-41bf-a8f4-18e52a4f2609.png 1356w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n  &lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot; /&gt;\n    &lt;title&gt;Title&lt;/title&gt;\n    &lt;style&gt;&lt;/style&gt;\n  &lt;/head&gt;\n\n  &lt;style id=&quot;s&quot;&gt;\n    .test {\n      background: #f00;\n      animation: size 1s infinite alternate;\n    }\n  &lt;/style&gt;\n\n  &lt;body&gt;\n    &lt;div class=&quot;test&quot;&gt;test&lt;/div&gt;\n\n    &lt;script&gt;\n      const Style = (_ =&gt; {\n        const prop = new Map(),\n          prefix = &#39;webkit,moz,ms,chrom,o,khtml&#39;.split(&#39;,&#39;);\n        const NONE = Symbol();\n        const BASE = document.body.style;\n        const getKey = key =&gt; {\n          if (prop.has(key)) return prop.get(key);\n          if (key in BASE) prop.set(key, key);\n          else if (\n            !prefix.some(v =&gt; {\n              //프리픽스를 붙인 속성은 존재하는가?\n              const newKey = v + key[0].toUpperCase() + key.substr(1);\n              if (newKey in BASE) {\n                prop.set(key, newKey);\n                key = newKey;\n                return true;\n              } else return false;\n            })\n          ) {\n            prop.set(key, NONE);\n            key = NONE; //프리픽스로도 안되면 없는 키!\n          }\n          return key;\n        };\n        return class {\n          constructor(style) {\n            this._style = style;\n          }\n          get(key) {\n            key = getKey(key);\n            if (key === NONE) return null;\n            return this._style[key];\n          }\n          set(key, val) {\n            key = getKey(key);\n            if (key !== NONE) this._style[key] = val;\n            return this;\n          }\n        };\n      })();\n\n      const Rule = class {\n        constructor(rule) {\n          this._rule = rule;\n          this._style = new Style(rule.style);\n        }\n        get(key) {\n          return this._style.get(key);\n        }\n        set(key, val) {\n          this._style.set(key, val);\n          return this;\n        }\n      };\n\n      const KeyFrameRule = class {\n        constructor(rule) {\n          this._keyframe = rule;\n          this._rules = new Map(); //위의 Rule 클래스를 사용하기 위해\n        }\n        add(selector) {\n          const index = this._keyframe.cssRules.length;\n          this._keyframe.appendRule(`${selector}{}`, index);\n          const cssRule = this._keyframe.cssRules[index];\n          const rule = new Rule(cssRule);\n          this._rules.set(selector, rule);\n          return rule;\n        }\n        remove(selector) {\n          if (!this._rules.has(selector)) return;\n          const rule = this._rules.get(selector)._rule;\n          Array.from(this._keyframe.cssRules).some((cssRule, index) =&gt; {\n            if (cssRule === rule._rule) {\n              this._keyframe.deleteRule(index);\n              return true;\n            }\n          });\n        }\n      };\n\n      const Sheet = class {\n        constructor(sheet) {\n          this._sheet = sheet;\n          this._rules = new Map(); //위의 Rule 클래스를 사용하기 위해\n        }\n        add(selector) {\n          const index = this._sheet.cssRules.length;\n          this._sheet.insertRule(`${selector}{}`, index);\n          const cssRule = this._sheet.cssRules[index];\n          let rule;\n          if (selector.startsWith(&#39;@keyframes&#39;)) {\n            rule = new KeyFrameRule(cssRule);\n          } else {\n            rule = new Rule(cssRule);\n          }\n          this._rules.set(selector, rule);\n          return rule;\n        }\n        remove(selector) {\n          if (!this._rules.has(selector)) return;\n          const rule = this._rules.get(selector);\n          Array.from(this._sheet.cssRules).some((cssRule, index) =&gt; {\n            if (cssRule === rule._rule) {\n              this._sheet.deleteRule(index);\n              return true;\n            }\n          });\n        }\n        get(selector) {\n          return this._rules.get(selector);\n        }\n      };\n\n      const sheet = new Sheet(document.styleSheets[1]);\n      const size = sheet.add(&#39;@keyframes size&#39;);\n      size.add(&#39;from&#39;).set(&#39;width&#39;, &#39;0&#39;);\n      size.add(&#39;to&#39;).set(&#39;width&#39;, &#39;500px&#39;);\n\n      // sheet.add(&#39;body&#39;).set(&#39;background&#39;, &#39;#f00&#39;);\n      // sheet\n      //   .add(&#39;.test&#39;)\n      //   .set(\n      //     &#39;cssText&#39;,\n      //     &#39;width:200px; border:1px solid #fff; color:#000; background:#fff&#39;\n      //   );\n      // sheet.remove(&#39;.test&#39;);\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</code></pre></div>\n<video controls autoplay loop>\n  <source src=\"/0cfa041f11d3533bc109c69b7aa0cd4e/keyframe_ex.mov\" type=\"video/mp4\">\n    Your browser does not support the video tag.\n</video>\n</li>\n</ul>\n<h2>Typed CSSOM</h2>\n<p><a href=\"https://drafts.css-houdini.org/css-typed-om/\">CSS Typed OM Level 1</a></p>\n<p>w3가 아닌데 표준이라고 불린다.</p>\n<p>houdin - 구글이 협회를  만들어서 css 요구한 바를 만들어서 draft로 제출한다고 하는 프로젝트이다. (구글은 w3를 싫어 한다..구글은 할 수 있는 것이 많은데 w3로 제한 받는 것을 싫어 하는 것 같다.)</p>\n<ul>\n<li>\n<p><del>$(‘#someDiv’).style.height= getRandonInt() + ‘px’</del></p>\n<ul>\n<li>js 애니메이션 프레임워크에서 텍스트를 조립하는 과정이 속도를 저하시킨다.</li>\n<li>\n<p>구글은 이를 싫어 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">CSS.number(0.5)\nel.styleMap.set(&#39;opacity&#39;, CSS.number(0.5)\n\nCSS.px(500);\nel.styleMap.set(&#39;height&#39;,CSS.px(500));</code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<p><a href=\"https://developer.mozilla.org/ko/docs/Web/API/CSS\">CSS</a></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">CSS{\n\tnumber, percent\n\tem, ex, ch, ic, rem, lg, rlh, vw, vh ....... px\n}</code></pre></div>","fields":{"tagSlugs":["/tags/cssom/"],"slug":"/etc/css-rendering-3/"},"frontmatter":{"title":"Css Rendering 3","tags":["CSSOM"],"date":"2019-04-03T08:16:35.750Z","description":"Code spitz에서 강의한 Css Rendering 3 CSSOM (css 객체 모델)내용을 정리한 글입니다. CSSOM 을 이용하여 DOM 을 조작하지 않고도 성능저하 없이 화면을 조정 할 수 있다는 것을 알게 되었습니다.","path":"/etc/css-rendering-3/","category":"css"},"tableOfContents":"<ul>\n<li><a href=\"/etc/css-rendering-3/#cssom--vendor-prefix\">CSSOM &#x26; VENDOR PREFIX</a></li>\n<li><a href=\"/etc/css-rendering-3/#css-object-model\">Css object model</a></li>\n<li><a href=\"/etc/css-rendering-3/#insert-rule\">Insert Rule</a></li>\n<li><a href=\"/etc/css-rendering-3/#compatibility-library-%EB%A7%8C%EB%93%A4%EA%B8%B0\">Compatibility Library 만들기</a></li>\n<li><a href=\"/etc/css-rendering-3/#classes\">Classes</a></li>\n<li><a href=\"/etc/css-rendering-3/#typed-cssom\">Typed CSSOM</a></li>\n</ul>","headings":[{"value":"CSSOM & VENDOR PREFIX","depth":2},{"value":"Css object model","depth":2},{"value":"Insert Rule","depth":2},{"value":"Compatibility Library 만들기","depth":2},{"value":"Classes","depth":2},{"value":"Typed CSSOM","depth":2}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/etc/css-rendering-3/"}}}